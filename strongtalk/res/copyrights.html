<html>

  <head>
    <link rel="stylesheet" href="css/tachyons.min.css"/>
  </head>

  <body>


  <body class="w-100 sans-serif">


    <article class="cf ph3 ph5-ns pv5">
  <header class="fn fl-ns w-50-ns pr4-ns">
    <h1 class="f2 lh-title fw9 mb3 mt0 pt3 bt bw2">
      On Typography
    </h1>
    <h2 class="f3 mid-gray lh-title">
      An excerpt from the Form of the Book by Jan Tschichold
    </h2>
    <time class="f6 ttu tracked gray">Sometime before 1967</time>
  </header>
  
  <div class="fn fl-ns w-50-ns">
    <p class="f5 lh-copy measure mt0-ns">
      TYPOGRAPHY, even when poorly executed, can never be taken for granted;
      nor is it ever accidental. Indeed, beautifully typeset pages are always
      the result of long experience. Now and then they even attain the rank of
      great artistic achievement. But the art of typesetting stands apart from
      ex- pressive artwork, because the appeal is not limited to a small
      circle. It is open to everyone's critical judgment, and nowhere does this
      judgment carry more weight. Typography that can- not be read by everybody
      is useless. Even for someone who constantly ponders matters of
      readability and legibility, it is difficult to determine whether
      something can be read with ease, but the average reader will rebel at
      once when the type is too small or otherwise irritates the eye; both are
      signs of a certain illegibility already.
    </p>
    <p class="f5 lh-copy measure">
      All typography consists of letters. These appear either in the form of a
      smoothly running sentence or as an assembly of lines, which may even have
      contrasting shapes. Good typog- raphy begins, and this is no minor
      matter, with the typeset- ting of a single line of text in a book or a
      newspaper. Using exactly the same typeface, it is possible to create either
      a pleasant line, easily read, or an onerous one. Spacing, if it is too wide
      or too compressed, will spoil almost any typeface.
    </p>
  </div>
</article>


    
    
<main class="pa3 pa5-ns">
   <p class="f5 lh-copy measure">
     Typography has one plain duty before it and that is to convey information
     in writing.
     
     <p>No argument or consideration can absolve typography from this
     duty. A printed work which cannot be read becomes a product without
     purpose.

    
    
##
##  (C) 1994 - 2020, The Strongtalk authors and contributors
##  Refer to the "COPYRIGHTS" file at the root of this source tree for complete licence and copyright terms
##

# -----------------------------------------------------------------------------

NOMENCLATURE

    This is Strongtalk-2020


COMPILER
RECOMPILER


SOURCE FILES

    .dlt    "delta" files
    .gr     "group" files, used for denoting a group of .dlt files



TYPE FEEDBACK

    RecompilationScope is the source for type feedback.


PRIMTIIVES

    Primitives are like procedures (no dispatching is necessary) and invoked by providing a number of parameters.


    CODE GENERATION

        src/perl/primDefFilter
            generates prims.src file

        src/smalltalk/StrongtalkSource/DeltaPrimitiveGenerator.dlt
            reads prims.src file


NON-LOCAL RETURNS


CALLING CONVENTIONS

    "stdcall" / "Pascal" calling convention
        A routine that uses the Pascal calling convention must preserve EBX, EBP, ESI, EDI.
        (source Microsoft Development Library, MASM 6.1 Programmer's Guide)

    "cdecl" / "C" calling convention
        A routine that uses the C calling convention must preserve EBP, ESI, EDI.


INLINE CACHING

    The goal of inline caching is to speed up runtime method binding by remembering
    the results of a previous method lookup directly at the call site.

        anamorphic,     // send has never been executed => no type information	(size = 0)
        monomorphic,    // only one receiver type available			(size = 1)
        polymorphic,    // more than one receiver type available		(size > 1)
        megamorphic     // many receiver types, only last one is available	(size = 1)


    Initially, a call site is considered to be in the "anamorphic" state.

    Once the language runtime reaches a particular uninitialized call site, it
    performs the dynamic lookup, stores the result at the call site and changes its
    state to "monomorphic".

    A "polymorphic" call site decides which of a limited set of known methods to
    invoke based on the type that it is currently presented with. In other words,
    with polymorphic inline caching, multiple method lookup results can be recorded
    at the same call site. 

    Because every call site in a program can potentially see every type in the
    system, there usually is an upper bound to how many lookup results are recorded
    at each call site.  Once that upper bound is reached, call sites become
    "megamorphic" and no more inline caching is performed.

    The abbreviations "MIC", "PIC" are used for MegamorphicInlineCache and PolymorphicInlineCache
    A MegamorphicInlineCache is also known as a "megamorphic PolymorphicInlineCache".



MESSAGE SENDS

    Normal sends
        message sent to a selector on a receiver

    Super sends
        message sent to a selector on a super class of a receiver




JumpTable

CodeTable

CodeTableLink


NATIVE METHODS

    NativeMethod objects are the compiled code versions of Delta methods.

    A NativeMethod consists of, in order:

       <ul class="list pl0">
        <li> header</li>
        <li>machine instructions (mostly in NCodeBase)</li>
        <li>oop location informatio	(in OopNativeCode)</li>
        <li>mapping from block_closure_index to NonInlinedBlockScope offset</li>
        <li>debugging information
        <li> dependency information
       </ul>
       
<ul class="list pl0">


    <h5 class="f3 f1-m f-headline-l">Title</h1>


MEMORY ALLOCATION MODEL

  All classes in the virtual machine must be subclassed by one of the following allocation classes:

   "For objects allocated in the resource area."
   - ResourceObject
     - PrintableResourceObject

   "For objects allocated in the C-heap (managed by: free & malloc)."
   - CHeapAllocatedObject
     - PrintableCHeapAllocatedObject

   "For objects allocated on the stack."
   - StackAllocatedObject
     - PrintableStackAllocatedObject

   "For embedded objects."
   - ValueObject

   "For classes used as name spaces."
   - AllStatic

   "The printable subclasses are used for debugging and define virtual
    member functions for printing. Classes that avoid allocating the
    vtbl entries in the objects should therefore not the printable subclasses"


GLYPH



# -----------------------------------------------------------------------------


SEE ALSO

    https://en.wikipedia.org/wiki/Inline_caching

   </p>
</main>


</body>

</html>
